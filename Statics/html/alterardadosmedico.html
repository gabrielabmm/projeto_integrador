<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SIDCC - Perfil do Profissional/Instituição</title>
  <link rel="stylesheet" href="../css/alterardados.css" />
  <style>
    /* Estilo básico para a imagem do avatar se for adicionada dinamicamente */


    /* Estilos para os inputs no modo de visualização (fundo verde) */
    .info-formulario input[type="text"],
    .info-formulario input[type="email"],
    .info-formulario input[type="tel"] {
        background-color: #e7f5e7; 
        border: 1px solid #ccc;
        color: #333; 
        padding: 8px; 
        box-sizing: border-box; 
        width: 100%; 
    }
</style>
</head>
    
<body>
  <header class="topo">
       <div class="logo">
    <img src="../img/logo.png" alt="SIDCC Logo" class="logo" >
    <span class="logo-text-sidcc"> <span class="char-s">S</span><span class="char-i">I</span><span
                    class="char-d">D</span><span class="char-c1">C</span><span class="char-c2">C</span>
            </span>
    </div>
    <div class="grupo-menu">
      <nav class="menu">
        <a href="iniciomedico.html">Início</a>
        <a href="#">Sobre</a>
        <a href="#">SAC</a>
      </nav>
      <div class="icone-perfil">
        <img src="../img/ruiva.png" alt="Perfil" />
      </div>
    </div>
  </header>

  <main class="conteudo">
    <h2>Olá, <span id="saudacao-nome"></span>!</h2>

    <section class="cartao">
      <div class="perfil">
        <div class="avatar">
          <img src="../img/ruiva.png" alt="Foto de perfil" />
        </div>
        <p class="nome" id="nome-exibicao-perfil"></p>
        <a href="escolher-nova-senha.html" style="text-decoration: none;">
          <button class="botao">Alterar senha</button>
        </a>
      </div>

      <div class="info-formulario">
        <h3>Dados da Instituição/Profissional</h3>
        <div class="grade-formulario">
          <label>Nome da Instituição/Profissional:
            <input type="text" id="nomeInstituicao" />
          </label>
          <label>CNES:
            <input type="text" id="cnes" />
          </label>
          <label>CRM/COREN do Responsável:
            <input type="text" id="crmCorenResponsavel" />
          </label>
          <label>CNPJ (Opcional):
            <input type="text" id="cnpj" />
          </label>
          <label>Email:
            <input type="email" id="email" />
          </label>
          <label>Celular:
            <input type="tel" id="celular" />
          </label>
          <label>Telefone Fixo:
            <input type="tel" id="telefone" />
          </label>
        </div>

        <h3>Endereço Comercial</h3>
        <div class="grade-formulario">
          <label>CEP:
            <input type="text" id="cep" />
          </label>
          <label>Cidade:
            <input type="text" id="cidade" />
          </label>
          <label class="largura-total">Endereço:
            <input type="text" id="endereco" />
          </label>
          <label>Número:
            <input type="text" id="numero" />
          </label>
          <label>Complemento (Opcional):
            <input type="text" id="complemento" />
          </label>
          <label>Bairro:
            <input type="text" id="bairro" />
          </label>
        </div>

        <button class="botao editar">Editar</button>
        <button class="botao salvar" style="display: none;">Salvar Alterações</button>
      </div>
    </section>
  </main>

  <script>
    // Seus dados JS (podem vir de um arquivo JS separado ou serem definidos antes de geral.js)
    const dadosInstituicaoAutenticada = {
      nomeInstituicao: "Joana",
      cnes: "1234567",
      crmCorenResponsavel: "CRM/SP 123456",
      // Adicione outros dados conforme necessário para preencher o formulário
      email: "contato@joanaclinica.com",
      celular: "(11) 99999-8888",
      telefone: "(11) 5555-4444",
      cnpj: "12.345.678/0001-99",
      cep: "01000-000",
      cidade: "São Paulo",
      endereco: "Av. Principal",
      numero: "100",
      bairro: "Centro",
      complemento: "Sala 3",
      online: {
        senha: "Pi2025" // Lembre-se que a senha não deve ser pré-preenchida no formulário
      }
    };
  </script>
  <script src="../js/geral.js"></script>
    <script>
      window.addEventListener("DOMContentLoaded", function() {
        // Verifica se o usuário da instituição está "logado" (simulado pelo localStorage)
        const instituicaoLogadaCNES = localStorage.getItem('instituicaoLogadaIdentificador');

        // Verifica se dadosInstituicaoAutenticada está definido e se o CNES corresponde (se logado)
        if (typeof dadosInstituicaoAutenticada !== 'undefined') {
          if (instituicaoLogadaCNES && dadosInstituicaoAutenticada.cnes !== instituicaoLogadaCNES) {
            console.warn("CNES no localStorage não corresponde aos dados carregados. Usando dados carregados.");
            // Você pode decidir redirecionar aqui se a inconsistência for crítica
          }

          if (typeof window.preencherFormularioInstituicao === 'function') {
            window.preencherFormularioInstituicao(); // Chama a nova função
          } else {
            console.error("A função preencherFormularioInstituicao não foi encontrada. Verifique geral.js.");
          }
        } else {
          console.error("O objeto dadosInstituicaoAutenticada não foi encontrado. Verifique geral.js.");
          // Informar ao usuário ou redirecionar, pois os dados essenciais não estão disponíveis
        }
      });
    </script>
</body>
</html>
